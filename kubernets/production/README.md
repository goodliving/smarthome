### 概述

这是关于`kubernetes`的生产集群的预备方案，包括核心模块、网络模块、存储模块、网络模块以及LB模块。对于正常的开发流程，可以搭建两个集群，一个用来跑生产，另一个用来跑测试，对于其配置，除了`IP`不一致，其他所有保持一致（网络、存储以及路由等，不需要搭建性能测试环境，同时保持与生产环境最大的一致性）。通过外部的`drone`进行构建服务镜像，外部的`helm`仓库来进行版本迭代，`hugo`进行文档管理。

通过对主机设置`label`进行各个模块的标记，如核心模块的`label`、`LB`模块的`label`，总之，我们可以通用设置不同的`label`来满足我们个性化的需求。

### 技术栈

- [x] 核心模块
- [x] 存储模块
- [x] 网络模块
- [x] `LB`模块
- [x] `helm`模块
- [x] `drone`模块
- [x] `gitea`模块
- [x] `Prometheus`模块
- [x] `hugo`模块

整个业务场景是用户从`gitea`创建好一个代码仓库，当用户提交代码到`gitea`上，`drone`自动触发构建流程，当不管成功或者失败，通知相关人员（微信、邮件、rocket.chat等），成功的话则通过`drone`的`gitea`插件将版本发布到`gitea`上，标记版本说明。同时触发单元测试构建，当不管成功或者失败，通知相关人员，成功的话则触发冒烟测试，当不管成功或者失败，通知相关人员，成功的话则触发自动化测试构建，不管成功或者失败，通知相关人员，成功的话，交付版本给运维。对于监控模块，需要开发内部程序监控以及外部资源的监控。

对于文档的编写，如需求文档、接口文档以及测试方案等，可以通过`hugo`编写，同时也可以直接集成到`drone`，通过插件实现。

> **Note：服务完全解耦、接口文档、自动化方案、helm安装包**

