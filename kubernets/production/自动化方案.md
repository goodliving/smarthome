### 概述

这是关于现金贷自动化测试方案描述，包括应用容器化、环境搭建、镜像仓库、自动化、性能压测、持续集成以及后期维护。

[TOC]

### 应用容器化

- 环境分析
- 配置分离
- 容器化

对于环境分析，需要分析目前环境对接的第三方配置以及拓扑图，能否实现各个部件的内网搭建，以及处理无法内网部署的服务。

对于配置分离，是将配置项与代码剥离，实现解耦，方便容器的部署以及微服务。

对于容器化，主要是编写`Dockerfile`实现应用构建步骤以及设置配置项，方便后期的容器集成。

> **对于不能实现容器，也可以在通过`Dockerfile`来进行代码构建以及`ansible`插件部署**

###环境搭建

* 服务器
* 安装编排

对于服务器，需要规划好资源（不确定是公网还是内网服务器，需要申请购买），进行后续的安装编排，实现自动构建部署。

###镜像仓库

存储应用镜像，以及镜像版本控制，在安装编排中进行制定版本安装。

###自动化

* 接口自动化工具
* 接口分析
* 自动化范围

对于接口自动化工具，目前考虑`httprunner`以及`robotframework`，推荐使用`httprunner`，当考虑到开发未提供接口文档或者接口文档不清晰，可以通过抓包，来生成接口接口自动化用例。

对于接口分析，需要理清接口逻辑以及数据库入库，基于用户数据层面，实现端到端的自动化测试。

对于自动化范围，`app`端自动化以及接口自动化。

> **需要考虑的是`KTP`的人脸识别以及`OCR`图像识别的实现方式；`app`需要使用`mac`电脑，实现`ios`端自动化**
>
> **`httprunner`工具目前还是处于完善阶段，可能会有坑，需要实践以及查看源码**

### 性能压测

如果采用`httprunner`工具，可以通过其内置的压力测试工具`Locust `来实现。

> **需要确认后期的用户量以及性能指标，性能环境搭建**

### 持续集成

目前有两个工具，`jenkins`以及`drone`来实现构建以及安装部署，自动化测试流水线。同时基于`drone`插件实现`kubernetes`编排，后期可以将应用迁移到`kubernets`中。

### 后期维护

需要与开发确认接口变更流程以及文档编写，以及自动化测试用例编写规划。

> **对于文档编写，推荐采用`confluence`团队协作的wiki编写工具，后期可以考虑产品需求文档迁移到`confluence`中。**

